{% extends 'base.html' %}
{% block content %}
{% load static %}

<h1 class="header">My Stays</h1>
<div class="container">
    {% for visit in visits %}
        <div class="visit_display">
            <h3><strong>Week: {{ visit.week_booking }} of {{ visit.year_booking }}</strong></h3>  
            <p>Week charge Â£{{ visit.charge }} </p>
            <div>
                <div>
                    <h6 class="header">Public Comment</h6>
                    {% for comment in o_comment %}
                        {% if comment.booking_reference_id|lower == visit.booking_reference|lower %}
                            
                            <p> <strong>you posted:</strong></p>
                            <p class="feedback">{{ comment.comment }}</p>
                            <div class="editors">
                            <p><a href="{% url 'edit_public' comment.booking_reference_id comment.o_comment_id %}"><i class="fa-solid fa-pencil"></i> edit</a></p>
                            <p><span href="{% url '#' comment.booking_reference}"><i class="fa-solid fa-trash"></i> delete </span></p>
                            </div>
                        {% endif%}
                        {% empty %}
                        {{ comment.booking_reference_id}}
                            <p>
                                You have not left a comment yet. <br>
                                <a href="{% url 'new_public_comment' visit.booking_reference %}">Click here to add one!.</a>
                            </p>
                    {% endfor %}
                </div>
                <hr>
                <div>
                    <h6 class="header">My notes: (personal)</h6>
                    {% for comment in personal_comment_list %}
                        <p> test</p>
                    {% empty %}
                    <p>
                        You have not left a comment yet. <br>
                        <a href="{% url 'new_personal_comment' visit.booking_reference %}">Click here to add one!.</a>
                    {% endfor %}
                </div>
            </div>
        <div>
    {% endfor %}
</div>
<div class="pagination grid-x grid-padding-x align-center-middle text-center">
    <span class="step-links">
        {% if page_obj.has_previous %}
        <a href="my_visits?page=1">&laquo; first</a>
        <a href="my_visits?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}
    </span>
    
    <span class="current">
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
    </span>
    
    <span class="step-links">
        {% if page_obj.has_next %}
        <a href="my_visits?page={{ page_obj.next_page_number }}">next</a>
        <a href="my_visits?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
    
</div>
    

{% endblock %}